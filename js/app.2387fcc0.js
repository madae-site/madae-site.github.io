(function(){"use strict";var e={7185:function(e,t,a){var n=a(9798),l=a(4220);function r(e,t){const a=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(a)}var o=a(1317);const u={},i=(0,o.A)(u,[["render",r]]);var s=i,c=a(5220),d=(a(4645),a(7700)),f=a(6732),v=a(4413);const p=e=>((0,l.Qi)("data-v-12b9203e"),e=e(),(0,l.jt)(),e),m={class:"market-data-container"},b=p((()=>(0,l.Lk)("h2",{class:"text-h4 text-center q-mb-sm"},"신마법의대륙 시세표",-1))),g={class:"item-title-text"},h=p((()=>(0,l.Lk)("div",{class:"text-subtitle2"},"가격 정보 (개당)",-1))),k=p((()=>(0,l.Lk)("div",{class:"text-subtitle2"},"거래 내역",-1))),_={class:"average-count-text"},y={class:"average-price-text"};var w={__name:"MarketPage",setup(e){const t=(0,f.KR)([]),a=(0,f.KR)([]),n=(0,f.KR)(!0),r=(0,f.KR)(null),o=[{width:"60%"},{width:"15%"},{width:"25%"}],u=[{name:"item",label:"아이템명",field:"item",sortable:!0},{name:"totalCount",label:"거래량",field:"totalCount",sortable:!0,format:e=>q(e)},{name:"averagePrice",label:"평균가격",field:"averagePrice",sortable:!0,format:e=>P(e)}],i=(0,l.EW)((()=>[...a.value].sort(((e,t)=>t.totalCount-e.totalCount)))),s=e=>{const t=e.reduce(((e,t)=>{const a=t.item.match(/\((\d+)개\)$/);let n=1,l=t.item;a&&(n=parseInt(a[1]),l=t.item.replace(/\(\d+개\)$/,"").trim());const r=parseInt(t.price.replace(/,/g,""));return e[l]||(e[l]={item:l,totalCount:0,totalPrice:0,transactions:[]}),e[l].totalCount+=n,e[l].totalPrice+=r,e[l].transactions.push({date:t.date,time:t.time,buyer:t.buyer,price:r,count:n}),e}),{});return Object.values(t).map((e=>({...e,averagePrice:Math.round(e.totalPrice/e.totalCount)})))},c=async()=>{const e="1FpPV7ChZm1EaG4EfMBjTTy4qwNR-P-3qUTRQhpmAr7E",a="마대시장",l="A:E",o="AIzaSyA-UjgOrvO_9OYa3L5L_Hb7q6MN2Wh1mVo",u=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${a}!${l}?key=${o}`;try{const e=await v.A.get(u),a=e.data.values;t.value=a.slice(1).map((e=>({date:e[0],time:e[1],item:e[2],buyer:e[3],price:e[4]})))}catch(i){console.error("Error fetching sheet data:",i),r.value="데이터를 불러오는 중 오류가 발생했습니다."}finally{n.value=!1}},p=(0,f.KR)(!1),w=(0,f.KR)(null),F=(e,t)=>{w.value=t,p.value=!0},A=()=>{w.value=null},x=(e,t)=>e/t,C=(0,l.EW)((()=>w.value?Math.max(...w.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),O=(0,l.EW)((()=>w.value?Math.min(...w.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),P=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e)),q=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e));return(0,l.sV)((async()=>{await c(),a.value=s(t.value)})),(e,t)=>{const a=(0,l.g2)("q-table"),r=(0,l.g2)("q-card-section"),s=(0,l.g2)("q-item-label"),c=(0,l.g2)("q-item-section"),f=(0,l.g2)("q-item"),v=(0,l.g2)("q-list"),Q=(0,l.g2)("q-btn"),E=(0,l.g2)("q-card-actions"),M=(0,l.g2)("q-card"),W=(0,l.g2)("q-dialog"),j=(0,l.gN)("close-popup");return(0,l.uX)(),(0,l.CE)("div",m,[b,n.value?(0,l.Q3)("",!0):((0,l.uX)(),(0,l.Wv)(a,{key:0,rows:i.value,columns:u,"row-key":"item",loading:n.value,"rows-per-page-options":[0],pagination:{rowsPerPage:0},onRowClick:F,class:"styled-table","table-style":{fontSize:"16px"},"table-col-style":o,flat:"",bordered:"","hide-bottom":"",separator:"none"},null,8,["rows","loading"])),(0,l.bF)(W,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),onHide:A},{default:(0,l.k6)((()=>[(0,l.bF)(M,{style:{"min-width":"350px","max-width":"600px",width:"90vw"}},{default:(0,l.k6)((()=>[(0,l.bF)(r,{class:"item-title-wrap"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",g,(0,d.v_)(w.value?w.value.item:"")+" 거래내역 ",1)])),_:1}),w.value?((0,l.uX)(),(0,l.Wv)(r,{key:0,class:"price-info-wrap"},{default:(0,l.k6)((()=>[h,(0,l.bF)(v,{dense:""},{default:(0,l.k6)((()=>[(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.eW)("최고가 : "+(0,d.v_)(P(C.value))+"원 ",1)])),_:1})])),_:1})])),_:1}),(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.eW)("최저가 : "+(0,d.v_)(P(O.value))+"원 ",1)])),_:1})])),_:1})])),_:1}),(0,l.bF)(f,null,{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.eW)("평균가 : "+(0,d.v_)(P(w.value.averagePrice))+"원 ",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,l.Q3)("",!0),(0,l.bF)(r,{class:"price-history-wrap"},{default:(0,l.k6)((()=>[k,(0,l.bF)(v,{dense:""},{default:(0,l.k6)((()=>[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(w.value?.transactions,((e,t)=>((0,l.uX)(),(0,l.Wv)(f,{key:t},{default:(0,l.k6)((()=>[(0,l.bF)(c,null,{default:(0,l.k6)((()=>[(0,l.bF)(s,null,{default:(0,l.k6)((()=>[(0,l.eW)((0,d.v_)(e.date)+" ",1),(0,l.Lk)("span",_,(0,d.v_)(q(e.count))+"개 ",1),(0,l.eW)(" "+(0,d.v_)(P(e.price))+"원 ",1),(0,l.Lk)("span",y," (개당 "+(0,d.v_)(P(x(e.price,e.count)))+"원) ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,l.bF)(E,{align:"right",class:"text-primary item-footer-wrap"},{default:(0,l.k6)((()=>[(0,l.bo)((0,l.bF)(Q,{flat:"",label:"닫기"},null,512),[[j]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}},F=a(160),A=a(5704),x=a(3663),C=a(7180),O=a(5668),P=a(5740),q=a(1484),Q=a(2473),E=a(1248),M=a(3197),W=a(515),j=a(2110),L=a.n(j);const R=(0,o.A)(w,[["__scopeId","data-v-12b9203e"]]);var I=R;L()(w,"components",{QTable:F.A,QDialog:A.A,QCard:x.A,QCardSection:C.A,QList:O.A,QItem:P.A,QItemSection:q.A,QItemLabel:Q.A,QCardActions:E.A,QBtn:M.A}),L()(w,"directives",{ClosePopup:W.A});const K=[{path:"/",component:I}],S=(0,c.aE)({history:(0,c.LA)(),routes:K});var T=S,V=a(7564),X=a(1252),$={config:{},plugins:{},lang:X.A};const N=(0,n.Ef)(s);N.use(V.A,$),N.use(T).mount("#app")}},t={};function a(n){var l=t[n];if(void 0!==l)return l.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,l,r){if(!n){var o=1/0;for(c=0;c<e.length;c++){n=e[c][0],l=e[c][1],r=e[c][2];for(var u=!0,i=0;i<n.length;i++)(!1&r||o>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(u=!1,r<o&&(o=r));if(u){e.splice(c--,1);var s=l();void 0!==s&&(t=s)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[n,l,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var l,r,o=n[0],u=n[1],i=n[2],s=0;if(o.some((function(t){return 0!==e[t]}))){for(l in u)a.o(u,l)&&(a.m[l]=u[l]);if(i)var c=i(a)}for(t&&t(n);s<o.length;s++)r=o[s],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(c)},n=self["webpackChunkmadae_site"]=self["webpackChunkmadae_site"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(7185)}));n=a.O(n)})();
//# sourceMappingURL=app.2387fcc0.js.map