(function(){"use strict";var e={5204:function(e,t,a){var n=a(9798),o=a(4220);function r(e,t){const a=(0,o.g2)("router-view");return(0,o.uX)(),(0,o.Wv)(a)}var l=a(1317);const u={},i=(0,l.A)(u,[["render",r]]);var c=i,s=a(5220),d=(a(4645),a(7700)),v=a(6732),f=a(4413);const m=e=>((0,o.Qi)("data-v-0e08d588"),e=e(),(0,o.jt)(),e),p={class:"market-data-container"},b=m((()=>(0,o.Lk)("h2",{class:"text-h4 text-center q-mb-md"},"마대 시세표",-1))),g={class:"text-h6"},h=m((()=>(0,o.Lk)("div",{class:"text-subtitle2"},"가격 정보 (개당)",-1))),y=m((()=>(0,o.Lk)("div",{class:"text-subtitle2"},"거래 내역",-1)));var k={__name:"MarketPage",setup(e){const t=(0,v.KR)([]),a=(0,v.KR)([]),n=(0,v.KR)(!0),r=(0,v.KR)(null),l=[{width:"60%"},{width:"15%"},{width:"25%"}],u=[{name:"item",label:"아이템명",field:"item",sortable:!0},{name:"totalCount",label:"거래량",field:"totalCount",sortable:!0,format:e=>x(e)},{name:"averagePrice",label:"평균가격",field:"averagePrice",sortable:!0,format:e=>P(e)}],i=(0,o.EW)((()=>[...a.value].sort(((e,t)=>t.totalCount-e.totalCount)))),c=e=>{const t=e.reduce(((e,t)=>{const a=t.item.match(/\((\d+)개\)$/);let n=1,o=t.item;a&&(n=parseInt(a[1]),o=t.item.replace(/\(\d+개\)$/,"").trim());const r=parseInt(t.price.replace(/,/g,""));return e[o]||(e[o]={item:o,totalCount:0,totalPrice:0,transactions:[]}),e[o].totalCount+=n,e[o].totalPrice+=r,e[o].transactions.push({date:t.date,time:t.time,buyer:t.buyer,price:r,count:n}),e}),{});return Object.values(t).map((e=>({...e,averagePrice:Math.round(e.totalPrice/e.totalCount)})))},s=async()=>{const e="1FpPV7ChZm1EaG4EfMBjTTy4qwNR-P-3qUTRQhpmAr7E",a="마대시장",o="A:E",l="AIzaSyA-UjgOrvO_9OYa3L5L_Hb7q6MN2Wh1mVo",u=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${a}!${o}?key=${l}`;try{const e=await f.A.get(u),a=e.data.values;t.value=a.slice(1).map((e=>({date:e[0],time:e[1],item:e[2],buyer:e[3],price:e[4]})))}catch(i){console.error("Error fetching sheet data:",i),r.value="데이터를 불러오는 중 오류가 발생했습니다."}finally{n.value=!1}},m=(0,v.KR)(!1),k=(0,v.KR)(null),_=(e,t)=>{k.value=t,m.value=!0},w=()=>{k.value=null},A=(e,t)=>e/t,C=(0,o.EW)((()=>k.value?Math.max(...k.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),O=(0,o.EW)((()=>k.value?Math.min(...k.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),P=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e)),x=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e));return(0,o.sV)((async()=>{await s(),a.value=c(t.value)})),(e,t)=>{const a=(0,o.g2)("q-table"),r=(0,o.g2)("q-card-section"),c=(0,o.g2)("q-item-label"),s=(0,o.g2)("q-item-section"),v=(0,o.g2)("q-item"),f=(0,o.g2)("q-list"),x=(0,o.g2)("q-btn"),q=(0,o.g2)("q-card-actions"),F=(0,o.g2)("q-card"),Q=(0,o.g2)("q-dialog"),E=(0,o.gN)("close-popup");return(0,o.uX)(),(0,o.CE)("div",p,[b,n.value?(0,o.Q3)("",!0):((0,o.uX)(),(0,o.Wv)(a,{key:0,rows:i.value,columns:u,"row-key":"item",loading:n.value,"rows-per-page-options":[0],pagination:{rowsPerPage:0},onRowClick:_,class:"styled-table","table-style":{fontSize:"16px"},"table-col-style":l,flat:"",bordered:"","hide-bottom":"",separator:"none"},null,8,["rows","loading"])),(0,o.bF)(Q,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),onHide:w},{default:(0,o.k6)((()=>[(0,o.bF)(F,{style:{"min-width":"350px","max-width":"600px",width:"90vw"}},{default:(0,o.k6)((()=>[(0,o.bF)(r,null,{default:(0,o.k6)((()=>[(0,o.Lk)("div",g,(0,d.v_)(k.value?k.value.item:""),1)])),_:1}),k.value?((0,o.uX)(),(0,o.Wv)(r,{key:0},{default:(0,o.k6)((()=>[h,(0,o.Lk)("div",null,"최고가: "+(0,d.v_)(P(C.value))+"원",1),(0,o.Lk)("div",null,"최저가: "+(0,d.v_)(P(O.value))+"원",1),(0,o.Lk)("div",null," 평균가: "+(0,d.v_)(P(k.value.averagePrice))+"원 ",1)])),_:1})):(0,o.Q3)("",!0),(0,o.bF)(r,null,{default:(0,o.k6)((()=>[y,(0,o.bF)(f,{dense:""},{default:(0,o.k6)((()=>[((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(k.value?.transactions,((e,t)=>((0,o.uX)(),(0,o.Wv)(v,{key:t},{default:(0,o.k6)((()=>[(0,o.bF)(s,null,{default:(0,o.k6)((()=>[(0,o.bF)(c,null,{default:(0,o.k6)((()=>[(0,o.eW)((0,d.v_)(e.date)+" : "+(0,d.v_)(P(e.price))+"원 / "+(0,d.v_)(e.count)+"개 (개당 "+(0,d.v_)(P(A(e.price,e.count)))+"원) ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,o.bF)(q,{align:"right",class:"text-primary"},{default:(0,o.k6)((()=>[(0,o.bo)((0,o.bF)(x,{flat:"",label:"닫기"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}},_=a(160),w=a(5704),A=a(3663),C=a(7180),O=a(5668),P=a(5740),x=a(1484),q=a(2473),F=a(1248),Q=a(3197),E=a(515),M=a(2110),j=a.n(M);const L=(0,l.A)(k,[["__scopeId","data-v-0e08d588"]]);var R=L;j()(k,"components",{QTable:_.A,QDialog:w.A,QCard:A.A,QCardSection:C.A,QList:O.A,QItem:P.A,QItemSection:x.A,QItemLabel:q.A,QCardActions:F.A,QBtn:Q.A}),j()(k,"directives",{ClosePopup:E.A});const I=[{path:"/",component:R}],K=(0,s.aE)({history:(0,s.LA)(),routes:I});var S=K,W=a(7564),T=a(1252),V={config:{},plugins:{},lang:T.A};const X=(0,n.Ef)(c);X.use(W.A,V),X.use(S).mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,a),r.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,r){if(!n){var l=1/0;for(s=0;s<e.length;s++){n=e[s][0],o=e[s][1],r=e[s][2];for(var u=!0,i=0;i<n.length;i++)(!1&r||l>=r)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(u=!1,r<l&&(l=r));if(u){e.splice(s--,1);var c=o();void 0!==c&&(t=c)}}return t}r=r||0;for(var s=e.length;s>0&&e[s-1][2]>r;s--)e[s]=e[s-1];e[s]=[n,o,r]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,r,l=n[0],u=n[1],i=n[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(o in u)a.o(u,o)&&(a.m[o]=u[o]);if(i)var s=i(a)}for(t&&t(n);c<l.length;c++)r=l[c],a.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return a.O(s)},n=self["webpackChunkmadae_site"]=self["webpackChunkmadae_site"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(5204)}));n=a.O(n)})();
//# sourceMappingURL=app.8f6c45b6.js.map