(function(){"use strict";var e={7820:function(e,t,a){var n=a(9798),r=a(4220);function l(e,t){const a=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(a)}var o=a(1317);const u={},i=(0,o.A)(u,[["render",l]]);var c=i,s=a(5220),d=(a(4645),a(7700)),f=a(6732),v=a(4413);const m=e=>((0,r.Qi)("data-v-782af17e"),e=e(),(0,r.jt)(),e),p={class:"market-data-container"},b=m((()=>(0,r.Lk)("h2",{class:"text-h4 text-center q-mb-sm"},"신마법의대륙 시세표",-1))),g={class:"last-transaction-time"},h={class:"item-title-text"},k=m((()=>(0,r.Lk)("div",{class:"text-subtitle2"},"가격 정보 (개당)",-1))),_=m((()=>(0,r.Lk)("div",{class:"text-subtitle2"},"거래 내역",-1))),y={class:"average-count-text"},w={class:"average-price-text"};var F={__name:"MarketPage",setup(e){const t=(0,f.KR)([]),a=(0,f.KR)([]),n=(0,f.KR)(!0),l=(0,f.KR)(null),o=[{width:"60%"},{width:"15%"},{width:"25%"}],u=[{name:"item",label:"아이템명",field:"item",sortable:!0},{name:"totalCount",label:"거래량",field:"totalCount",sortable:!0,format:e=>E(e)},{name:"averagePrice",label:"평균가격",field:"averagePrice",sortable:!0,format:e=>q(e)}],i=(0,r.EW)((()=>[...a.value].sort(((e,t)=>t.totalCount-e.totalCount)))),c=e=>{const t=e.reduce(((e,t)=>{const a=t.item.match(/\((\d+)개\)$/);let n=1,r=t.item;a&&(n=parseInt(a[1]),r=t.item.replace(/\(\d+개\)$/,"").trim());const l=parseInt(t.price.replace(/,/g,""));return e[r]||(e[r]={item:r,totalCount:0,totalPrice:0,transactions:[]}),e[r].totalCount+=n,e[r].totalPrice+=l,e[r].transactions.push({date:t.date,time:t.time,buyer:t.buyer,price:l,count:n}),e}),{});return Object.values(t).map((e=>({...e,averagePrice:Math.round(e.totalPrice/e.totalCount)})))},s=async()=>{const e="1FpPV7ChZm1EaG4EfMBjTTy4qwNR-P-3qUTRQhpmAr7E",a="마대시장",r="A:E",o="AIzaSyA-UjgOrvO_9OYa3L5L_Hb7q6MN2Wh1mVo",u=`https://sheets.googleapis.com/v4/spreadsheets/${e}/values/${a}!${r}?key=${o}`;try{const e=await v.A.get(u),a=e.data.values;t.value=a.slice(1).map((e=>({date:e[0],time:e[1],item:e[2],buyer:e[3],price:e[4]})))}catch(i){console.error("Error fetching sheet data:",i),l.value="데이터를 불러오는 중 오류가 발생했습니다."}finally{n.value=!1}},m=(0,f.KR)(!1),F=(0,f.KR)(null),A=(e,t)=>{F.value=t,m.value=!0},x=()=>{F.value=null},C=(e,t)=>e/t,O=(0,r.EW)((()=>F.value?Math.max(...F.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),P=(0,r.EW)((()=>F.value?Math.min(...F.value.transactions.map((e=>Math.round(e.price/e.count)))):0)),q=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e)),E=e=>new Intl.NumberFormat("ko-KR").format(Math.round(e));function Q(e,t){const[a,n,r]=e.match(/\d+/g).map(Number),[l,o]=t.split(":").map(Number);return new Date(a,n-1,r,l,o)}const W=(0,r.EW)((()=>{if(0===a.value.length)return"데이터 없음";try{const e=[...a.value].sort(((e,t)=>{const a=e.transactions[0],n=t.transactions[0];return new Date(Q(n.date,n.time))-new Date(Q(a.date,a.time))})),t=e[0].transactions[0],n=Q(t.date,t.time);return n.toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(/\. /g,"월 ").replace(",","일").replace(/:/g,"시 ")+"분"}catch(l){return console.error("날짜 파싱 오류:",l),"날짜 형식 오류"}}));return(0,r.sV)((async()=>{await s(),a.value=c(t.value)})),(e,t)=>{const a=(0,r.g2)("q-table"),l=(0,r.g2)("q-card-section"),c=(0,r.g2)("q-item-label"),s=(0,r.g2)("q-item-section"),f=(0,r.g2)("q-item"),v=(0,r.g2)("q-list"),Q=(0,r.g2)("q-btn"),L=(0,r.g2)("q-card-actions"),M=(0,r.g2)("q-card"),j=(0,r.g2)("q-dialog"),R=(0,r.gN)("close-popup");return(0,r.uX)(),(0,r.CE)("div",p,[b,(0,r.Lk)("div",g," 마지막 거래시간 : "+(0,d.v_)(W.value),1),n.value?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.Wv)(a,{key:0,rows:i.value,columns:u,"row-key":"item",loading:n.value,"rows-per-page-options":[0],pagination:{rowsPerPage:0},onRowClick:A,class:"styled-table","table-style":{fontSize:"16px"},"table-col-style":o,flat:"",bordered:"","hide-bottom":"",separator:"none"},null,8,["rows","loading"])),(0,r.bF)(j,{modelValue:m.value,"onUpdate:modelValue":t[0]||(t[0]=e=>m.value=e),onHide:x},{default:(0,r.k6)((()=>[(0,r.bF)(M,{style:{"min-width":"350px","max-width":"600px",width:"90vw"}},{default:(0,r.k6)((()=>[(0,r.bF)(l,{class:"item-title-wrap"},{default:(0,r.k6)((()=>[(0,r.Lk)("div",h,(0,d.v_)(F.value?F.value.item:"")+" 거래내역 ",1)])),_:1}),F.value?((0,r.uX)(),(0,r.Wv)(l,{key:0,class:"price-info-wrap"},{default:(0,r.k6)((()=>[k,(0,r.bF)(v,{dense:""},{default:(0,r.k6)((()=>[(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(s,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)("최고가 : "+(0,d.v_)(q(O.value))+"원 ",1)])),_:1})])),_:1})])),_:1}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(s,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)("최저가 : "+(0,d.v_)(q(P.value))+"원 ",1)])),_:1})])),_:1})])),_:1}),(0,r.bF)(f,null,{default:(0,r.k6)((()=>[(0,r.bF)(s,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)("평균가 : "+(0,d.v_)(q(F.value.averagePrice))+"원 ",1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})):(0,r.Q3)("",!0),(0,r.bF)(l,{class:"price-history-wrap"},{default:(0,r.k6)((()=>[_,(0,r.bF)(v,{dense:""},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(F.value?.transactions,((e,t)=>((0,r.uX)(),(0,r.Wv)(f,{key:t},{default:(0,r.k6)((()=>[(0,r.bF)(s,null,{default:(0,r.k6)((()=>[(0,r.bF)(c,null,{default:(0,r.k6)((()=>[(0,r.eW)((0,d.v_)(e.date)+" ",1),(0,r.Lk)("span",y,(0,d.v_)(E(e.count))+"개 ",1),(0,r.eW)(" "+(0,d.v_)(q(e.price))+"원 ",1),(0,r.Lk)("span",w," (개당 "+(0,d.v_)(q(C(e.price,e.count)))+"원) ",1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1}),(0,r.bF)(L,{align:"right",class:"text-primary item-footer-wrap"},{default:(0,r.k6)((()=>[(0,r.bo)((0,r.bF)(Q,{flat:"",label:"닫기"},null,512),[[R]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}},A=a(160),x=a(5704),C=a(3663),O=a(7180),P=a(5668),q=a(5740),E=a(1484),Q=a(2473),W=a(1248),L=a(3197),M=a(515),j=a(2110),R=a.n(j);const I=(0,o.A)(F,[["__scopeId","data-v-782af17e"]]);var K=I;R()(F,"components",{QTable:A.A,QDialog:x.A,QCard:C.A,QCardSection:O.A,QList:P.A,QItem:q.A,QItemSection:E.A,QItemLabel:Q.A,QCardActions:W.A,QBtn:L.A}),R()(F,"directives",{ClosePopup:M.A});const S=[{path:"/",component:K}],T=(0,s.aE)({history:(0,s.LA)(),routes:S});var N=T,V=a(7564),X=a(1252),$={config:{},plugins:{},lang:X.A};const D=(0,n.Ef)(c);D.use(V.A,$),D.use(N).mount("#app")}},t={};function a(n){var r=t[n];if(void 0!==r)return r.exports;var l=t[n]={exports:{}};return e[n].call(l.exports,l,l.exports,a),l.exports}a.m=e,function(){var e=[];a.O=function(t,n,r,l){if(!n){var o=1/0;for(s=0;s<e.length;s++){n=e[s][0],r=e[s][1],l=e[s][2];for(var u=!0,i=0;i<n.length;i++)(!1&l||o>=l)&&Object.keys(a.O).every((function(e){return a.O[e](n[i])}))?n.splice(i--,1):(u=!1,l<o&&(o=l));if(u){e.splice(s--,1);var c=r();void 0!==c&&(t=c)}}return t}l=l||0;for(var s=e.length;s>0&&e[s-1][2]>l;s--)e[s]=e[s-1];e[s]=[n,r,l]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,l,o=n[0],u=n[1],i=n[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(r in u)a.o(u,r)&&(a.m[r]=u[r]);if(i)var s=i(a)}for(t&&t(n);c<o.length;c++)l=o[c],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(s)},n=self["webpackChunkmadae_site"]=self["webpackChunkmadae_site"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(7820)}));n=a.O(n)})();
//# sourceMappingURL=app.521f0950.js.map